








<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>櫃位資料更新 </title>
<th:block th:replace="~{/vendor-end/counter/Counterincldue :: head}"></th:block>


<style type="text/css">
	.update {
	  background-color: #ffffff; /* 設置背景顏色 */
	  border-radius: 15px; /* 設置圓角 */
	  padding: 20px; /* 內邊距讓內容不會貼邊 */
	  box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.1); /* 添加輕微陰影讓區塊更立體 */
	  max-width: 800px; /* 設置最大寬度 */
	  margin: 20px auto; /* 使 section 居中顯示 */
	}
	
	/* 調整表單中的輸入框與選擇框樣式 */
	input[type="text"], input[type="number"], input[type="date"], select, textarea {
	  width: 100%; /* 使元素寬度100% */
	  padding: 8px; /* 內邊距讓內容更清晰 */
	  margin: 10px 0; /* 上下間距 */
	  border: 1px solid #ccc; /* 邊框顏色 */
	  border-radius: 5px; /* 圓角 */
	  background-color: #f9f9f9; /* 背景顏色 */
	  box-sizing: border-box; /* 確保padding不會影響寬度 */
	}
	
	input[type="text"]:focus, input[type="number"]:focus, select:focus, textarea:focus {
	  outline: none; /* 去掉聚焦時的藍色邊框 */
	  border-color: #5bc5ff; /* 當聚焦時邊框變藍 */
	}
	
	/* 增加錯誤訊息的樣式 */
	.error {
	  color: red;
	  font-size: 12px;
	  margin-top: 5px;
	}
	
	/* 按鈕樣式 */
	button#submit {
	  padding: 10px 20px;
	  background-color: #5bc5ff; /* 按鈕背景色 */
	  color: white;
	  border: none;
	  border-radius: 5px;
	  cursor: pointer;
	  font-size: 16px;
	  margin-top: 10px;
	}
	
	button#submit:hover {
	  background-color: #4141ff;  /* 當滑鼠懸停時改變背景色 */
	}
	
	button#cancel {
	  padding: 10px 20px;
	  background-color: #ccc; /* 設定取消按鈕的顏色 */
	  color: white;
	  border: none;
	  border-radius: 5px;
	  cursor: pointer;
	  font-size: 16px;
	  margin-right: 10px;
	}
	
	button#cancel:hover {
	  background-color: #b3b3b3; /* 鼠標懸停顏色 */
	}
	
	/* 使表單內容垂直對齊 */
	form {
	  display: flex;
	  flex-direction: column;
	  align-items: flex-start;
	  margin-top: 10px;
	}
	
	form div {
	  width: 100%;
	}
	
	form div label {
	  display: block;
	  margin-bottom: 5px;
	  text-align: left; /* 讓所有的 label 文字靠左 */
	}
	
	form div input, form div select, form div textarea {
	  width: 100%;
	}
	
	/* 讓form內的元素保持一致的間距 */
	form div {
	  margin-bottom: 20px;
	}

</style>
</head>
<body>

		

	    <div align="center">
	    <section class="update"> 
        <h2>櫃位資料更新</h2>
        <div>*必填資料</div>
        <form th:action="@{/counter/vendor-end/update}" method="post" th:object="${counterVO}" enctype="multipart/form-data">
        	 <div>
                <input type="hidden" th:field="*{counterNo}" />
            </div>
        
            <div>
<!-- 			    <label for="counterAccount">櫃位帳號:</label> -->
			    <input type="hidden" th:field="*{counterAccount}" id="counterAccount" readonly />
<!-- 			    <span th:if="${#fields.hasErrors('counterAccount')}" th:errors="*{counterAccount}" class="error"></span> -->
<!-- 			    <span th:if="${accountError}" th:text="${accountError}" class="error"></span> -->
			</div>

            <div>
                <label>*櫃位管理者姓名:</label>
                <input type="text" th:field="*{counterName}" />
                <span th:if="${#fields.hasErrors('counterName')}" th:errors="*{counterName}" class="error"></span>
            </div>

            <div>
<!--                 <label>櫃位密碼:</label> -->
                <input type="hidden" th:field="*{counterPassword}" readonly/>
<!--                 <span th:if="${#fields.hasErrors('counterPassword')}" th:errors="*{counterPassword}" class="error"></span> -->
            </div>

            <div>
                <label>*櫃位地址:</label>
                <input type="text" th:field="*{counterAddress}" />
                <span th:if="${#fields.hasErrors('counterAddress')}" th:errors="*{counterAddress}" class="error"></span>
            </div>

            <div>
                <label>*櫃位電話:</label>
                <input type="text" th:field="*{counterPhone}" />
                <span th:if="${#fields.hasErrors('counterPhone')}" th:errors="*{counterPhone}" class="error"></span>
            </div>

            <div>
                <label>*管理者身分證字號:</label>
                <input type="text" th:field="*{counterUid}" />
                <span th:if="${#fields.hasErrors('counterUid')}" th:errors="*{counterUid}" class="error"></span>
            </div>

            <div>
                <label>*櫃位電子信箱:</label>
                <input type="email" th:field="*{counterEmail}" />
                <span th:if="${#fields.hasErrors('counterEmail')}" th:errors="*{counterEmail}" class="error"></span>
            </div>

            <div>
<!--                 <label>櫃位統一編號:</label> -->
                <input type="hidden" th:field="*{counterUbn}" readonly/>
<!--                 <span th:if="${#fields.hasErrors('counterUbn')}" th:errors="*{counterUbn}" class="error"></span> -->
<!--                 <span th:if="${ubnError}" th:text="${ubnError}" class="error"></span> -->
            </div>

            <div>
                <label>*櫃位名稱:</label>
                <input type="text" th:field="*{counterCName}" />
                <span th:if="${#fields.hasErrors('counterCName')}" th:errors="*{counterCName}" class="error"></span>
            </div>

			<div>
		    <label>*櫃位類別:</label>
		    <select th:field="*{counterTypeVO.counterTypeNo}">
		        <option th:each="counterTypeVO : ${counterTypeListData}" 
		                th:value="${counterTypeVO.counterTypeNo}" 
		                th:text="${counterTypeVO.counterTName}" />
		    </select>
		    <span th:if="${#fields.hasErrors('counterTypeVO.counterTypeNo')}" 
		          th:errors="*{counterTypeVO.counterTypeNo}" 
		          class="error" 
		          id="counterTypeVO.counterTypeNo.errors"></span>
			</div>

            <div>
                <label>櫃位資訊介紹:</label>
                <textarea th:field="*{counterInform}"></textarea>
                <span th:if="${#fields.hasErrors('counterInform')}" th:errors="*{counterInform}" class="error"></span>
            </div>

			<div>
			    <label>櫃位圖片:</label>
			    <input type="file" th:field="*{counterPic}" id="counterPic" accept="image/png, image/jpeg, image/gif" onchange="previewImage(this)" />
			</div>
			<!-- 圖片預覽區域 -->
				<img id="preview_image" th:src="@{/counter/DBGifReader} + '?counterNo=' + ${counterVO.counterNo}" width="100px">
			<div id="blob_holder" style="margin-top: 10px;">
			</div>


			<div>
			    <input type="hidden"  select th:field="*{counterStatus}" id="counterStatus">
			</div>
		
		</section>
			
            <div>
            	<button type="button" id="cancel" onclick="history.back();">取消</button>
                <button type="submit" id="submit">送出修改</button>
            </div>
        </form>
    </div>

	
	
<!-- JavaScript part -->
<script type="text/javascript">

//清除提示信息
function hideContent(d) {
    document.getElementById(d).style.display = "none";
}

// const originalImageHTML = `<img id="preview_image" th:src="@{/counter/DBGifReader} + '?counterNo=' + ${counterVO.counterNo}" width="100px">`;

//照片上傳 - 預覽功能
function previewImage(input) {
 const file = input.files[0];
 const acceptedTypes = ["image/png", "image/jpeg", "image/gif"];
 const blobHolder = document.getElementById("blob_holder");
 const previewImage = document.getElementById("preview_image");

 // 清空 blob_holder 和移除现有的 <img>
 blobHolder.innerHTML = "";
 if (previewImage) {
     previewImage.remove();
 }

 // 如果用户未选择文件，恢复原始的 <img>
//  if (!file) {
//      blobHolder.innerHTML = originalImageHTML;
//      return;
//  }

 // 檢查檔案是否有效
 if (acceptedTypes.includes(file.type)) {
     const reader = new FileReader();
     reader.onload = function (event) {
         const image = new Image();
         image.src = event.target.result;
         image.style.width = "100px";
         image.style.height = "100px";
         image.style.border = "2px solid #ccc";
         image.alt = "圖片預覽";
         blobHolder.appendChild(image);
     };
     reader.readAsDataURL(file);
 } else {
     blobHolder.innerHTML = `<div style="color: red;">無效的檔案格式！請上傳 PNG、JPEG 或 GIF 格式的圖片。</div>`;
 }
}


</script>

</body>
</html>